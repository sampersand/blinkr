<!DOCTYPE html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<link rel="stylesheet" type="text/css" href="index.css" media="screen" />
	<title>Blinkr</title>
	<script>
		function successful_login(){
			window.location.href = "./main.html";

		}
		function invalid_login(){
			document.getElementById('cred_result').style.display = 'inline';
			document.getElementById('uname').style.borderColor = "#990000";
			document.getElementById('pword').style.borderColor = "#990000";
		}
		function attemptToLogin(e) {
			if(e && e.keyCode == 13) {
				var uname = document.getElementById('uname');
				var pword = document.getElementById('pword');
				if(uname.value.length === 0){
					uname.focus();
				}
				else if(pword.value.length === 0){
					if(uname.value.length === 0)
						uname.focus();
					else
						pword.focus();
				}
				else {
					$.post('./php/login.php', {'username': uname.value, 'password': pword.value }).done(
						function(result) {
							if(result == 1){ //aka, continue with the login
								successful_login();
							} else {
								invalid_login();
							}
					});

				}
			}
		}
	</script>
</head>
<body >
	<div id=topbar>
		<span id=websitename>Blinkr</span>
	</div>
	<div id=login_details onKeyPress="attemptToLogin(event)">
		<span id=invalid_credentials style="display:block">Invalid username or password!</span>
		<form id=login_form>
			<input type=username id=uname placeholder=" Username" style="margin-bottom: 3px" /><br>
			<input type=password id=pword placeholder=" Password" style="margin-top: 3px" /><br>
		</form>
		<div id=buttons>
			<button>New User</button>
			<button form_id=login_form>Login</button>
		</div>
	</div>
</div>
</body>
